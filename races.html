<!DOCTYPE html>
<html lang="en">
<head>
    <!-- ... existing head content ... -->
</head>
<body>
    <!-- ... existing body content ... -->
    
    <script src="https://cdnjs.cloudflare.com/ajax/libs/marked/3.0.8/marked.min.js"></script>
    
    <script>
        document.addEventListener('DOMContentLoaded', () => {
            fetch('pages/races.md')
                .then(response => response.text())
                .then(text => {
                    const markdownContainer = document.getElementById('markdown-container');
                    const convertedHtml = marked(text);

                    // Extract the h1 title
                    const titleMatch = convertedHtml.match(/<h1>.*?<\/h1>/);
                    let finalHtml = titleMatch ? titleMatch[0] : '';

                    // Use a regular expression to match each div section
                    const sections = convertedHtml.match(/<div id=".*?">.*?<\/div>/gs);

                    sections.forEach(section => {
                        const sectionIdMatch = section.match(/<div id="(.*?)">/);
                        if (sectionIdMatch) {
                            const sectionId = sectionIdMatch[1];
                            const imagePath = `pages/images/${sectionId}.jpg`;

                            // Create a new div to wrap the image and the section
                            finalHtml += `<div class="content-section">`;
                            finalHtml += `<img src="${imagePath}" alt="${sectionId}" class="section-image">`;
                            finalHtml += section;
                            finalHtml += `</div>`;
                        }
                    });

                    markdownContainer.innerHTML = finalHtml;
                })
                .catch(error => console.error('Error fetching the Markdown file:', error));
        });
    </script>

</body>
</html>

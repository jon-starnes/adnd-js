<!DOCTYPE html>
<html lang="en">
<head>
    <!-- ... existing head content ... -->
</head>
<body>
    <!-- ... existing body content ... -->
    
    <script src="https://cdnjs.cloudflare.com/ajax/libs/marked/3.0.8/marked.min.js"></script>
    
    <script>
        document.addEventListener('DOMContentLoaded', () => {
            fetch('pages/races.md')
                .then(response => response.text())
                .then(text => {
                    const markdownContainer = document.getElementById('markdown-container');
                    const convertedHtml = marked(text);

                    // Use a regular expression to match each div section
                    const sections = convertedHtml.match(/<div id=".*?">.*?<\/div>/gs);

                    let finalHtml = '';

                    sections.forEach(section => {
                        // Check if the section contains an h1 tag
                        if (!section.match(/<h1>.*?<\/h1>/)) {
                            const sectionIdMatch = section.match(/<div id="(.*?)">/);
                            if (sectionIdMatch) {
                                const sectionId = sectionIdMatch[1];
                                const imagePath = `pages/images/${sectionId}.jpg`;

                                // Create a new div to wrap the image and the section
                                finalHtml += `<div class="content-section">`;
                                finalHtml += `<img src="${imagePath}" alt="${sectionId}" class="section-image">`;
                                finalHtml += section;
                                finalHtml += `</div>`;
                            }
                        } else {
                            // If there's an h1 tag, just append the section without an image
                            finalHtml += section;
                        }
                    });

                    markdownContainer.innerHTML = finalHtml;
                })
                .catch(error => console.error('Error fetching the Markdown file:', error));
        });
    </script>

</body>
</html>
